<nb-card [nbSpinner]="loading" nbSpinnerStatus="primary" size="large" nbSpinnerMessage="Loading..Please Wait">
  <nb-card-header>
      Manage Products
  </nb-card-header>
  <nb-card-body>

      <div class="row">
        <div class="col-xs-6 col-sm-3 marginClass"><div class='dropdown ml-3'>
            <select class='form-control' name='type' (change)="selectionChangedForMainCategory($event)" [(ngModel)]="catId">
                <option value=''>Select Category</option>
                <option *ngFor='let category of categoryArray' [value]='category.id'>{{category.title_en}}</option>
            </select>
        </div>
      </div>

      <div class="col-xs-6 col-sm-3 marginClass"><div class='dropdown ml-3'>
        <select class='form-control' name='type' (change)="selectionChangedForSubCategory($event)" [(ngModel)]="subCatId" [disabled]="showHideSubCategory">
            <option value=''>Select Sub Category</option>
            <option *ngFor='let subcategory of subCategory' [value]='subcategory.id'>{{subcategory.title_en}}</option>
        </select>
    </div>
  </div>

      <div class="col-xs-4 marginClass">
          <button type="button" class="btn btn-success" (click)="onSubmit()">Submit</button>
      </div>
      <div class="col-xs-4 ml-3 marginClass">
          <button type="button" class="btn btn-danger" (click)="resetFilter()">Reset</button>
    </div>
          <nb-card-body class="select-group text-right">
              <button type="submit" class="btn btn-primary" action="addd" title="Add Product" name='addrecord' (click)="addProduct()">Add Product</button>
          </nb-card-body>
      </div>

      <div class="panel-table table-responsive">
          <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
              <thead>
                  <tr>
                      <th style='display:none'>ID</th>
                      <th>Category</th>
                      <th>Sub Category</th>
                      <th>Title English</th>
                      <th>Title Urdu</th>
                      <th>Product Image</th>
                      <th>Traffic Flow Type</th>
                      <th>Label Image</th>
		      <th>Sort Order</th>
                      <th>Created At</th>
                      <th>Status</th>
                      <th>Actions</th>
                  </tr>
              </thead>
              <tbody *ngIf="objectLength == true">
                  <tr *ngFor="let item of products">
                      <td style='display:none'>{{ item.id }}</td>
                      <td>{{ item.mainCat }}</td>
                      <td>{{ item.subCat }}</td>
                      <td>{{ item.title_en }}</td>
                      <td>{{ item.title_ur }}</td>
                      <td><img [src]="item.productImg" *ngIf="item.productImg != '-'" width="50"></td>
                      <td>{{ item.trafficFlow == 0 ? 'Left' : 'Right' }}</td>
                      <td><img [src]="item.label" *ngIf="item.label != '-'" width="50"></td>
		      <td>{{ item.sortOrder }}</td>
                      <td>{{ item.created_at | date: 'MMM d, y, h:mm:ss a'}}</td>
                      <td>
                          <a title="Change Status" class="statusButton" (click)="updateStatusForProduct(1,item.id)"><i class="fa fa-toggle-on fa-2x fa-rotate-180 statusInactive" *ngIf="item.status == 0"></i></a>

                          <a title="Change Status" class="statusButton" (click)="updateStatusForProduct(0,item.id)"><i class="fa fa-toggle-on fa-2x statusActive" *ngIf="item.status == 1"></i></a>
                      </td>
                      <td>
                          <a title="Edit" class="editor_edit" (click)="editProduct(item)"><i class="fa fa-edit editIcon"></i></a>
                          <a title="Delete" class="editor_remove" (click)="deleteProduct(item.id)"><i class="fa fa-trash editIcon"></i></a></td>
                  </tr>
              </tbody>
              <tbody *ngIf="objectLength == false">
                <tr>
                    <td colspan="3" class="no-data-available">No data!</td>
                </tr>
            <tbody>

          </table>
      </div>
  </nb-card-body>
</nb-card>
